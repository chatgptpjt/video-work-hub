# 案件管理

案件の応募から契約、やり取り履歴の管理まで一元的に行うコマンドです。

## 使い方
```
/案件管理
```

## 機能

このコマンドは以下の3つのモードを持ちます：

### 1. 新規案件応募
- 案件URLを取得
- 応募文を自動生成
- 応募済みディレクトリに案件ファイルを作成

### 2. やり取り履歴追加
- 既存の案件ファイルを選択または案件IDを指定
- ユーザーからやり取り内容をヒアリング（日付、相手、内容）
- 案件ファイルの「やり取り履歴」セクションに追記
- ファイルが存在しない場合は新規作成を提案

### 3. 契約済みに移動
- 応募済みディレクトリの案件を選択
- 契約済みディレクトリに移動
- プロジェクト進捗ステータスを追加
  - ステータス例：テスト案件中、研修中、本番稼働中、など
- 契約日、報酬などの詳細情報を追記

## 実行フロー

1. **モード選択**
   ```
   どの操作を行いますか？
   1. 新規案件応募（応募文作成＋ファイル作成）
   2. やり取り履歴追加（既存案件にやり取りを追記）
   3. 契約済みに移動（応募済み→契約済みディレクトリ）
   ```

2. **各モードの処理**

   **モード1: 新規案件応募**
   - 案件URLを確認
   - WebFetchで案件詳細取得
   - プロフィールファイルを参照して応募文生成
   - 応募済みディレクトリに案件ファイル作成（案件ID_タイトル.md）

   **モード2: やり取り履歴追加**
   - 既存案件一覧を表示、または案件IDを入力
   - 以下をユーザーに確認：
     - 日付（デフォルト: 今日）
     - やり取り相手（例: クライアント、M.E.T.）
     - やり取り内容（口頭で説明してもらう）
   - 案件ファイルの「## やり取り履歴」または「## テスト案件（トライアル）の詳細やり取り」セクションに追記
   - セクションがない場合は新規作成

   **モード3: 契約済みに移動**
   - 応募済みディレクトリから案件を選択
   - 以下を確認：
     - 契約日
     - 現在のステータス（テスト案件中、研修中、本番稼働中、など）
     - その他追加情報
   - ファイルに以下を追加：
     ```markdown
     | **契約日** | YYYY/MM/DD |
     | **ステータス** | 🟡 **[ステータス]** |

     ## プロジェクト進捗ステータス

     ### 現在の状態
     - [ステータス内容]

     ### 次のステップ
     1. [次のアクション]
     ```
   - 契約済みディレクトリに移動
   - 応募済みから削除

## 参照ファイル
- プロフィール: .claude/プロフィール/クラウドワークスプロフィール.md
- 案件ディレクトリ: 案件/応募済み/, 案件/契約済み/

## 注意事項
- やり取り履歴は時系列順に記載
- 日付は YYYY/MM/DD HH:MM 形式
- 契約に進んだ案件は必ず契約済みディレクトリに移動
- ステータスは絵文字で視覚的にわかりやすく（🟡 進行中、✅ 完了、⏳ 待機中、など）

## 出力例

### やり取り履歴の追記例
```markdown
### 2026年01月22日 20:15 - クライアントからの連絡
クライアント より：
\```
テスト案件OKです！
次は本番案件をお願いします。
\```

### 2026年01月22日 20:30 - 返信
M.E.T. より：
\```
ありがとうございます！
本番案件もしっかり対応させていただきます。
\```
```

## 実装方針

1. AskUserQuestion ツールを使ってモード選択
2. 選択されたモードに応じて処理を分岐
3. 各モードで必要な情報をユーザーから収集
4. ファイル操作（Read, Edit, Write, Bash）で案件ファイルを管理
5. 処理完了後、結果をユーザーに報告
